import{r as g,j as e,z as G,o,B as P,p as M,D as q}from"./main-Bfqc3OM2.js";import{C as H}from"./checkbox-C00XASyc.js";import{C as I,a as J,b as K,c as Q,d as R,e as U,f as W}from"./command-DxyQCcdB.js";import{P as Y,a as Z,b as _}from"./popover-BdJJ_8pn.js";import{X as T}from"./x-DbSWajir.js";import{C as z}from"./check-CV9lRb_a.js";function ce({options:i,value:j=[],onChange:h,autoResize:p=!1,limitTags:m,showCode:v=!1,label:u,error:x,required:S,placeholder:B="Select options...",searchPlaceholder:O="Search...",emptyMessage:E="No results found.",disabled:r=!1,readonly:c=!1,size:N="md",className:w,triggerClassName:y,popoverClassName:V}){const[C,L]=g.useState(!1),n=g.useMemo(()=>j||[],[j]),f=g.useMemo(()=>i.filter(s=>n.includes(s.id)),[i,n]),b=s=>{if(r||c)return;const a=n.includes(s)?n.filter(l=>l!==s):[...n,s],d=i.filter(l=>a.includes(l.id));h?.(a,d.length>0?d:void 0)},X=(s,t)=>{if(t.preventDefault(),t.stopPropagation(),r||c)return;const a=n.filter(l=>l!==s),d=i.filter(l=>a.includes(l.id));h?.(a,d.length>0?d:void 0)},$=s=>{s.preventDefault(),s.stopPropagation(),!(r||c)&&h?.([],void 0)},A=s=>v&&s.code!==void 0?`${s.code} - ${s.name}`:s.name,F=m?f.slice(0,m):f,k=m?Math.max(0,f.length-m):0,D=e.jsxs(Y,{open:C,onOpenChange:L,children:[e.jsx(Z,{asChild:!0,children:e.jsxs(G,{variant:"outline",role:"combobox","aria-expanded":C,disabled:r,size:N,className:o("w-full justify-between group/combobox",!n.length&&"text-muted-foreground",x&&"border-destructive",p&&"h-auto min-h-0",y),children:[e.jsx("div",{className:o("flex-1 flex items-center gap-1.5 min-w-0",p?"flex-wrap":"overflow-hidden"),children:n.length===0?e.jsx("span",{className:"text-left truncate",children:B}):e.jsxs(e.Fragment,{children:[F.map(s=>e.jsxs(P,{variant:"secondary",className:o("gap-1 shrink-0",!p&&"truncate max-w-[120px]",(r||c)&&"pr-2"),children:[e.jsx("span",{className:"truncate",children:A(s)}),!r&&!c&&e.jsx("button",{type:"button",onMouseDown:t=>{t.preventDefault(),t.stopPropagation()},onClick:t=>X(s.id,t),className:"ml-0.5 hover:bg-destructive/20 rounded-full p-0.5 -mr-1 shrink-0",children:e.jsx(T,{className:"h-2.5 w-2.5"})})]},s.id)),k>0&&e.jsxs(P,{variant:"secondary",className:"shrink-0",children:["+",k]})]})}),e.jsx("div",{className:"flex items-center gap-1 shrink-0 ml-2",children:n.length>0&&!r&&!c?e.jsxs("span",{onMouseDown:s=>{s.preventDefault(),s.stopPropagation()},onClick:$,className:"cursor-pointer",children:[e.jsx(I,{className:"text-muted-foreground hidden group-hover/combobox:block h-4 w-4"}),e.jsx(M,{className:"text-muted-foreground block group-hover/combobox:hidden h-4 w-4"})]}):e.jsx(M,{className:"text-muted-foreground h-4 w-4"})})]})}),e.jsx(_,{className:o("w-(--radix-popover-trigger-width) p-0",V),align:"start",children:e.jsxs(J,{children:[e.jsx(K,{placeholder:O}),e.jsxs(Q,{children:[e.jsx(R,{children:E}),e.jsx(U,{children:i.map(s=>{const t=n.includes(s.id);return e.jsxs(W,{value:s.name,disabled:s.disabled,onSelect:()=>{b(s.id)},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("div",{onMouseDown:a=>a.preventDefault(),onClick:a=>{a.preventDefault(),a.stopPropagation(),b(s.id)},className:"shrink-0",children:e.jsx(H,{checked:t,disabled:s.disabled||r||c,size:N})}),e.jsxs("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:[v&&s.code!==void 0&&e.jsx("span",{className:"text-muted-foreground shrink-0",children:s.code}),e.jsx("span",{className:"flex-1 truncate",children:s.name})]}),e.jsx(z,{className:o("h-4 w-4 shrink-0 text-primary",t?"opacity-100":"opacity-0")})]},s.id)})})]})]})})]});return!u&&!x?e.jsx("div",{className:o("w-full",w),children:D}):e.jsxs("div",{className:o("w-full",w),children:[u&&e.jsxs(q,{className:"text-foreground leading-5 block",children:[u,S&&e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx("div",{className:u?"mt-1":"",children:D}),x&&e.jsx("div",{className:"text-destructive text-sm mt-1.5",role:"alert",children:x})]})}export{ce as M};
