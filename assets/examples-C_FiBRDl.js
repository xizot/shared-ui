import{$ as C,j as e,o as S,D as N,r as p,C as o,a as d,b as c,c as u,d as h,z as U}from"./main-Bfqc3OM2.js";import{F as x}from"./file-upload-BGHrG8j0.js";import{u as y,C as D,a as w}from"./index.esm-C9D3F4Xi.js";import"./progress-c_XahErw.js";import"./x-DbSWajir.js";function E({control:t,name:r,label:a,error:n,required:i=!1,wrapperClassName:s,...l}){const f=y({control:t,name:r}),j=n||C(f.errors,`${r}.message`);return e.jsxs("div",{className:S("w-full",s),"data-slot":"rhf-file-upload",children:[a&&e.jsxs(N,{htmlFor:r,className:"mb-2 block",children:[a,i&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx(D,{control:t,name:r,render:({field:{onChange:F,value:g,...b}})=>{const v=g?(Array.isArray(g)?g:[g]).filter(Boolean):[];return e.jsx(x,{...l,...b,value:v,onChange:m=>{l.multiple?F(m):F(m.length>0?m[0]:void 0)},onError:m=>{console.error("File upload error:",m)},disabled:l.disabled})}}),j&&e.jsx("p",{className:"text-sm text-destructive mt-1","data-slot":"rhf-file-upload-error",children:j})]})}function k(){const[t,r]=p.useState([]),[a,n]=p.useState([]),[i,s]=p.useState([]),l=w({defaultValues:{documents:[]}}),f=j=>{console.log("Form submitted:",j)};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Basic File Upload"}),e.jsx(u,{children:"Simple single file upload"})]}),e.jsxs(h,{children:[e.jsx(x,{value:t,onChange:r}),t.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[t.length," file(s) selected"]})]})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Multiple Files"}),e.jsx(u,{children:"Upload multiple files at once"})]}),e.jsxs(h,{children:[e.jsx(x,{value:a,onChange:n,multiple:!0}),a.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[a.length," file(s) selected"]})]})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Image Only"}),e.jsx(u,{children:"Restrict uploads to image files only"})]}),e.jsxs(h,{children:[e.jsx(x,{value:i,onChange:s,accept:"image/*",multiple:!0,placeholder:"PNG, JPG, GIF up to 5MB"}),i.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[i.length," image(s) selected"]})]})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"With Validation"}),e.jsx(u,{children:"File size and count restrictions"})]}),e.jsx(h,{children:e.jsx(x,{accept:".pdf,.doc,.docx",multiple:!0,maxSize:5*1024*1024,maxFiles:3,placeholder:"PDF, DOC, DOCX (max 5MB, max 3 files)"})})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"With Progress"}),e.jsx(u,{children:"File upload with progress tracking"})]}),e.jsx(h,{children:e.jsx(R,{})})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Disabled State"}),e.jsx(u,{children:"File upload in disabled state"})]}),e.jsx(h,{children:e.jsx(x,{disabled:!0,placeholder:"Upload disabled"})})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"With React Hook Form"}),e.jsx(u,{children:"File upload integrated with react-hook-form"})]}),e.jsx(h,{children:e.jsxs("form",{onSubmit:l.handleSubmit(f),className:"space-y-4",children:[e.jsx(E,{control:l.control,name:"documents",label:"Upload Documents",multiple:!0,accept:".pdf,.doc,.docx",maxSize:10*1024*1024}),e.jsx(U,{type:"submit",children:"Submit"})]})})]})]})}function R(){const[t,r]=p.useState([]);p.useEffect(()=>{if(t.length>0){const n=setInterval(()=>{r(i=>i.map(s=>{if(s.status==="uploading"&&s.progress!==void 0){const l=Math.min(s.progress+10,100);return{...s,progress:l,status:l===100?"success":"uploading"}}return s}))},500);return()=>clearInterval(n)}},[t]);const a=n=>{const i=n.map(s=>{const l=s instanceof File?s:s.file;return{file:l,preview:l.type.startsWith("image/")?URL.createObjectURL(l):void 0,progress:0,status:"uploading"}});r(i)};return e.jsx(x,{value:t,onChange:a,showProgress:!0,multiple:!0,placeholder:"Files will show upload progress"})}export{k as default};
