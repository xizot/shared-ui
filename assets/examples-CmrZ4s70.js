import{R as b,$ as Ut,j as g,o as Lt,D as Mt,r as xe,C as ae,a as ne,b as ue,c as oe,d as de,z as Tt}from"./main-Dg6BE9yI.js";import{F as ce}from"./file-upload-8KdeCkxS.js";import"./progress-zPtXeYUW.js";import"./x-DmP3Cy0d.js";var Fe=e=>e.type==="checkbox",fe=e=>e instanceof Date,$=e=>e==null;const ft=e=>typeof e=="object";var L=e=>!$(e)&&!Array.isArray(e)&&ft(e)&&!fe(e),yt=e=>L(e)&&e.target?Fe(e.target)?e.target.checked:e.target.value:e,Nt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ht=(e,s)=>e.has(Nt(s)),Bt=e=>{const s=e.constructor&&e.constructor.prototype;return L(s)&&s.hasOwnProperty("isPrototypeOf")},Ne=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function M(e){let s;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(Ne&&(e instanceof Blob||i))&&(t||L(e)))if(s=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!Bt(e))s=e;else for(const n in e)e.hasOwnProperty(n)&&(s[n]=M(e[n]));else return e;return s}var ke=e=>/^\w*$/.test(e),R=e=>e===void 0,Be=e=>Array.isArray(e)?e.filter(Boolean):[],Ie=e=>Be(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!L(e))return t;const i=(ke(s)?[s]:Ie(s)).reduce((n,a)=>$(n)?n:n[a],e);return R(i)||i===e?R(e[s])?t:e[s]:i},K=e=>typeof e=="boolean",E=(e,s,t)=>{let i=-1;const n=ke(s)?[s]:Ie(s),a=n.length,o=a-1;for(;++i<a;){const c=n[i];let w=t;if(i!==o){const C=e[c];w=L(C)||Array.isArray(C)?C:isNaN(+n[i+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=w,e=e[c]}};const pe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Y={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},se={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},gt=b.createContext(null);gt.displayName="HookFormContext";const Pe=()=>b.useContext(gt);var mt=(e,s,t,i=!0)=>{const n={defaultValues:s._defaultValues};for(const a in e)Object.defineProperty(n,a,{get:()=>{const o=a;return s._proxyFormState[o]!==Y.all&&(s._proxyFormState[o]=!i||Y.all),t&&(t[o]=!0),e[o]}});return n};const We=typeof window<"u"?b.useLayoutEffect:b.useEffect;function vt(e){const s=Pe(),{control:t=s.control,disabled:i,name:n,exact:a}=e||{},[o,c]=b.useState(t._formState),w=b.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return We(()=>t._subscribe({name:n,formState:w.current,exact:a,callback:C=>{!i&&c({...t._formState,...C})}}),[n,i,a]),b.useEffect(()=>{w.current.isValid&&t._setValid(!0)},[t]),b.useMemo(()=>mt(o,t,w.current,!1),[o,t])}var J=e=>typeof e=="string",Le=(e,s,t,i,n)=>J(e)?(i&&s.watch.add(e),y(t,e,n)):Array.isArray(e)?e.map(a=>(i&&s.watch.add(a),y(t,a))):(i&&(s.watchAll=!0),t),Me=e=>$(e)||!ft(e);function Q(e,s,t=new WeakSet){if(Me(e)||Me(s))return Object.is(e,s);if(fe(e)&&fe(s))return e.getTime()===s.getTime();const i=Object.keys(e),n=Object.keys(s);if(i.length!==n.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const a of i){const o=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const c=s[a];if(fe(o)&&fe(c)||L(o)&&L(c)||Array.isArray(o)&&Array.isArray(c)?!Q(o,c,t):!Object.is(o,c))return!1}}return!0}function It(e){const s=Pe(),{control:t=s.control,name:i,defaultValue:n,disabled:a,exact:o,compute:c}=e||{},w=b.useRef(n),C=b.useRef(c),V=b.useRef(void 0),x=b.useRef(t),v=b.useRef(i);C.current=c;const[T,H]=b.useState(()=>{const F=t._getWatch(i,w.current);return C.current?C.current(F):F}),j=b.useCallback(F=>{const A=Le(i,t._names,F||t._formValues,!1,w.current);return C.current?C.current(A):A},[t._formValues,t._names,i]),N=b.useCallback(F=>{if(!a){const A=Le(i,t._names,F||t._formValues,!1,w.current);if(C.current){const z=C.current(A);Q(z,V.current)||(H(z),V.current=z)}else H(A)}},[t._formValues,t._names,a,i]);We(()=>((x.current!==t||!Q(v.current,i))&&(x.current=t,v.current=i,N()),t._subscribe({name:i,formState:{values:!0},exact:o,callback:F=>{N(F.values)}})),[t,o,i,N]),b.useEffect(()=>t._removeUnmounted());const ee=x.current!==t,_=v.current,B=b.useMemo(()=>{if(a)return null;const F=!ee&&!Q(_,i);return ee||F?j():null},[a,ee,i,_,j]);return B!==null?B:T}function Pt(e){const s=Pe(),{name:t,disabled:i,control:n=s.control,shouldUnregister:a,defaultValue:o,exact:c=!0}=e,w=ht(n._names.array,t),C=b.useMemo(()=>y(n._formValues,t,y(n._defaultValues,t,o)),[n,t,o]),V=It({control:n,name:t,defaultValue:C,exact:c}),x=vt({control:n,name:t,exact:c}),v=b.useRef(e),T=b.useRef(void 0),H=b.useRef(n.register(t,{...e.rules,value:V,...K(e.disabled)?{disabled:e.disabled}:{}}));v.current=e;const j=b.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(x.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(x.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(x.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(x.validatingFields,t)},error:{enumerable:!0,get:()=>y(x.errors,t)}}),[x,t]),N=b.useCallback(F=>H.current.onChange({target:{value:yt(F),name:t},type:pe.CHANGE}),[t]),ee=b.useCallback(()=>H.current.onBlur({target:{value:y(n._formValues,t),name:t},type:pe.BLUR}),[t,n._formValues]),_=b.useCallback(F=>{const A=y(n._fields,t);A&&F&&(A._f.ref={focus:()=>F.focus&&F.focus(),select:()=>F.select&&F.select(),setCustomValidity:z=>F.setCustomValidity(z),reportValidity:()=>F.reportValidity()})},[n._fields,t]),B=b.useMemo(()=>({name:t,value:V,...K(i)||x.disabled?{disabled:x.disabled||i}:{},onChange:N,onBlur:ee,ref:_}),[t,i,x.disabled,N,ee,_,V]);return b.useEffect(()=>{const F=n._options.shouldUnregister||a,A=T.current;A&&A!==t&&!w&&n.unregister(A),n.register(t,{...v.current.rules,...K(v.current.disabled)?{disabled:v.current.disabled}:{}});const z=(G,me)=>{const I=y(n._fields,G);I&&I._f&&(I._f.mount=me)};if(z(t,!0),F){const G=M(y(n._options.defaultValues,t,v.current.defaultValue));E(n._defaultValues,t,G),R(y(n._formValues,t))&&E(n._formValues,t,G)}return!w&&n.register(t),T.current=t,()=>{(w?F&&!n._state.action:F)?n.unregister(t):z(t,!1)}},[t,n,w,a]),b.useEffect(()=>{n._setDisabledField({disabled:i,name:t})},[i,t,n]),b.useMemo(()=>({field:B,formState:x,fieldState:j}),[B,x,j])}const Wt=e=>e.render(Pt(e));var Ht=(e,s,t,i,n)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:n||!0}}:{},_e=e=>Array.isArray(e)?e:[e],tt=()=>{let e=[];return{get observers(){return e},next:n=>{for(const a of e)a.next&&a.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(a=>a!==n)}}),unsubscribe:()=>{e=[]}}};function bt(e,s){const t={};for(const i in e)if(e.hasOwnProperty(i)){const n=e[i],a=s[i];if(n&&L(n)&&a){const o=bt(n,a);L(o)&&(t[i]=o)}else e[i]&&(t[i]=a)}return t}var W=e=>L(e)&&!Object.keys(e).length,He=e=>e.type==="file",Z=e=>typeof e=="function",De=e=>{if(!Ne)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},xt=e=>e.type==="select-multiple",qe=e=>e.type==="radio",qt=e=>qe(e)||Fe(e),Ue=e=>De(e)&&e.isConnected;function $t(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=R(e)?i++:e[s[i++]];return e}function zt(e){for(const s in e)if(e.hasOwnProperty(s)&&!R(e[s]))return!1;return!0}function U(e,s){const t=Array.isArray(s)?s:ke(s)?[s]:Ie(s),i=t.length===1?e:$t(e,t),n=t.length-1,a=t[n];return i&&delete i[a],n!==0&&(L(i)&&W(i)||Array.isArray(i)&&zt(i))&&U(e,t.slice(0,-1)),e}var Gt=e=>{for(const s in e)if(Z(e[s]))return!0;return!1};function _t(e){return Array.isArray(e)||L(e)&&!Gt(e)}function Te(e,s={}){for(const t in e){const i=e[t];_t(i)?(s[t]=Array.isArray(i)?[]:{},Te(i,s[t])):R(i)||(s[t]=!0)}return s}function ge(e,s,t){t||(t=Te(s));for(const i in e){const n=e[i];if(_t(n))R(s)||Me(t[i])?t[i]=Te(n,Array.isArray(n)?[]:{}):ge(n,$(s)?{}:s[i],t[i]);else{const a=s[i];t[i]=!Q(n,a)}}return t}const rt={value:!1,isValid:!1},st={value:!0,isValid:!0};var Vt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!R(e[0].attributes.value)?R(e[0].value)||e[0].value===""?st:{value:e[0].value,isValid:!0}:st:rt}return rt},Ft=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>R(e)?e:s?e===""?NaN:e&&+e:t&&J(e)?new Date(e):i?i(e):e;const it={isValid:!1,value:null};var At=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,it):it;function lt(e){const s=e.ref;return He(s)?s.files:qe(s)?At(e.refs).value:xt(s)?[...s.selectedOptions].map(({value:t})=>t):Fe(s)?Vt(e.refs).value:Ft(R(s.value)?e.ref.value:s.value,e)}var Kt=(e,s,t,i)=>{const n={};for(const a of e){const o=y(s,a);o&&E(n,a,o._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:i}},Se=e=>e instanceof RegExp,be=e=>R(e)?e:Se(e)?e.source:L(e)?Se(e.value)?e.value.source:e.value:e,at=e=>({isOnSubmit:!e||e===Y.onSubmit,isOnBlur:e===Y.onBlur,isOnChange:e===Y.onChange,isOnAll:e===Y.all,isOnTouch:e===Y.onTouched});const nt="AsyncFunction";var Jt=e=>!!e&&!!e.validate&&!!(Z(e.validate)&&e.validate.constructor.name===nt||L(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===nt)),Xt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ut=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Ve=(e,s,t,i)=>{for(const n of t||Object.keys(e)){const a=y(e,n);if(a){const{_f:o,...c}=a;if(o){if(o.refs&&o.refs[0]&&s(o.refs[0],n)&&!i)return!0;if(o.ref&&s(o.ref,o.name)&&!i)return!0;if(Ve(c,s))break}else if(L(c)&&Ve(c,s))break}}};function ot(e,s,t){const i=y(e,t);if(i||ke(t))return{error:i,name:t};const n=t.split(".");for(;n.length;){const a=n.join("."),o=y(s,a),c=y(e,a);if(o&&!Array.isArray(o)&&t!==a)return{name:t};if(c&&c.type)return{name:a,error:c};if(c&&c.root&&c.root.type)return{name:`${a}.root`,error:c.root};n.pop()}return{name:t}}var Yt=(e,s,t,i)=>{t(e);const{name:n,...a}=e;return W(a)||Object.keys(a).length>=Object.keys(s).length||Object.keys(a).find(o=>s[o]===(!i||Y.all))},Qt=(e,s,t)=>!e||!s||e===s||_e(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i))),Zt=(e,s,t,i,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(s||e):(t?i.isOnBlur:n.isOnBlur)?!e:(t?i.isOnChange:n.isOnChange)?e:!0,er=(e,s)=>!Be(y(e,s)).length&&U(e,s),tr=(e,s,t)=>{const i=_e(y(e,t));return E(i,"root",s[t]),E(e,t,i),e};function dt(e,s,t="validate"){if(J(e)||Array.isArray(e)&&e.every(J)||K(e)&&!e)return{type:t,message:J(e)?e:"",ref:s}}var he=e=>L(e)&&!Se(e)?e:{value:e,message:""},ct=async(e,s,t,i,n,a)=>{const{ref:o,refs:c,required:w,maxLength:C,minLength:V,min:x,max:v,pattern:T,validate:H,name:j,valueAsNumber:N,mount:ee}=e._f,_=y(t,j);if(!ee||s.has(j))return{};const B=c?c[0]:o,F=p=>{n&&B.reportValidity&&(B.setCustomValidity(K(p)?"":p||""),B.reportValidity())},A={},z=qe(o),G=Fe(o),me=z||G,I=(N||He(o))&&R(o.value)&&R(_)||De(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,le=Ht.bind(null,j,i,A),te=(p,S,O,P=se.maxLength,q=se.minLength)=>{const re=p?S:O;A[j]={type:p?P:q,message:re,ref:o,...le(p?P:q,re)}};if(a?!Array.isArray(_)||!_.length:w&&(!me&&(I||$(_))||K(_)&&!_||G&&!Vt(c).isValid||z&&!At(c).isValid)){const{value:p,message:S}=J(w)?{value:!!w,message:w}:he(w);if(p&&(A[j]={type:se.required,message:S,ref:B,...le(se.required,S)},!i))return F(S),A}if(!I&&(!$(x)||!$(v))){let p,S;const O=he(v),P=he(x);if(!$(_)&&!isNaN(_)){const q=o.valueAsNumber||_&&+_;$(O.value)||(p=q>O.value),$(P.value)||(S=q<P.value)}else{const q=o.valueAsDate||new Date(_),re=Ae=>new Date(new Date().toDateString()+" "+Ae),ve=o.type=="time",ye=o.type=="week";J(O.value)&&_&&(p=ve?re(_)>re(O.value):ye?_>O.value:q>new Date(O.value)),J(P.value)&&_&&(S=ve?re(_)<re(P.value):ye?_<P.value:q<new Date(P.value))}if((p||S)&&(te(!!p,O.message,P.message,se.max,se.min),!i))return F(A[j].message),A}if((C||V)&&!I&&(J(_)||a&&Array.isArray(_))){const p=he(C),S=he(V),O=!$(p.value)&&_.length>+p.value,P=!$(S.value)&&_.length<+S.value;if((O||P)&&(te(O,p.message,S.message),!i))return F(A[j].message),A}if(T&&!I&&J(_)){const{value:p,message:S}=he(T);if(Se(p)&&!_.match(p)&&(A[j]={type:se.pattern,message:S,ref:o,...le(se.pattern,S)},!i))return F(S),A}if(H){if(Z(H)){const p=await H(_,t),S=dt(p,B);if(S&&(A[j]={...S,...le(se.validate,S.message)},!i))return F(S.message),A}else if(L(H)){let p={};for(const S in H){if(!W(p)&&!i)break;const O=dt(await H[S](_,t),B,S);O&&(p={...O,...le(S,O.message)},F(O.message),i&&(A[j]=p))}if(!W(p)&&(A[j]={ref:B,...p},!i))return A}}return F(!0),A};const rr={mode:Y.onSubmit,reValidateMode:Y.onChange,shouldFocusError:!0};function sr(e={}){let s={...rr,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},n=L(s.defaultValues)||L(s.values)?M(s.defaultValues||s.values)||{}:{},a=s.shouldUnregister?{}:M(n),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},w,C=0;const V={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...V};const v={array:tt(),state:tt()},T=s.criteriaMode===Y.all,H=r=>l=>{clearTimeout(C),C=setTimeout(r,l)},j=async r=>{if(!s.disabled&&(V.isValid||x.isValid||r)){const l=s.resolver?W((await G()).errors):await I(i,!0);l!==t.isValid&&v.state.next({isValid:l})}},N=(r,l)=>{!s.disabled&&(V.isValidating||V.validatingFields||x.isValidating||x.validatingFields)&&((r||Array.from(c.mount)).forEach(u=>{u&&(l?E(t.validatingFields,u,l):U(t.validatingFields,u))}),v.state.next({validatingFields:t.validatingFields,isValidating:!W(t.validatingFields)}))},ee=(r,l=[],u,h,f=!0,d=!0)=>{if(h&&u&&!s.disabled){if(o.action=!0,d&&Array.isArray(y(i,r))){const m=u(y(i,r),h.argA,h.argB);f&&E(i,r,m)}if(d&&Array.isArray(y(t.errors,r))){const m=u(y(t.errors,r),h.argA,h.argB);f&&E(t.errors,r,m),er(t.errors,r)}if((V.touchedFields||x.touchedFields)&&d&&Array.isArray(y(t.touchedFields,r))){const m=u(y(t.touchedFields,r),h.argA,h.argB);f&&E(t.touchedFields,r,m)}(V.dirtyFields||x.dirtyFields)&&(t.dirtyFields=ge(n,a)),v.state.next({name:r,isDirty:te(r,l),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else E(a,r,l)},_=(r,l)=>{E(t.errors,r,l),v.state.next({errors:t.errors})},B=r=>{t.errors=r,v.state.next({errors:t.errors,isValid:!1})},F=(r,l,u,h)=>{const f=y(i,r);if(f){const d=y(a,r,R(u)?y(n,r):u);R(d)||h&&h.defaultChecked||l?E(a,r,l?d:lt(f._f)):O(r,d),o.mount&&!o.action&&j()}},A=(r,l,u,h,f)=>{let d=!1,m=!1;const D={name:r};if(!s.disabled){if(!u||h){(V.isDirty||x.isDirty)&&(m=t.isDirty,t.isDirty=D.isDirty=te(),d=m!==D.isDirty);const k=Q(y(n,r),l);m=!!y(t.dirtyFields,r),k?U(t.dirtyFields,r):E(t.dirtyFields,r,!0),D.dirtyFields=t.dirtyFields,d=d||(V.dirtyFields||x.dirtyFields)&&m!==!k}if(u){const k=y(t.touchedFields,r);k||(E(t.touchedFields,r,u),D.touchedFields=t.touchedFields,d=d||(V.touchedFields||x.touchedFields)&&k!==u)}d&&f&&v.state.next(D)}return d?D:{}},z=(r,l,u,h)=>{const f=y(t.errors,r),d=(V.isValid||x.isValid)&&K(l)&&t.isValid!==l;if(s.delayError&&u?(w=H(()=>_(r,u)),w(s.delayError)):(clearTimeout(C),w=null,u?E(t.errors,r,u):U(t.errors,r)),(u?!Q(f,u):f)||!W(h)||d){const m={...h,...d&&K(l)?{isValid:l}:{},errors:t.errors,name:r};t={...t,...m},v.state.next(m)}},G=async r=>{N(r,!0);const l=await s.resolver(a,s.context,Kt(r||c.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return N(r),l},me=async r=>{const{errors:l}=await G(r);if(r)for(const u of r){const h=y(l,u);h?E(t.errors,u,h):U(t.errors,u)}else t.errors=l;return l},I=async(r,l,u={valid:!0})=>{for(const h in r){const f=r[h];if(f){const{_f:d,...m}=f;if(d){const D=c.array.has(d.name),k=f._f&&Jt(f._f);k&&V.validatingFields&&N([d.name],!0);const X=await ct(f,c.disabled,a,T,s.shouldUseNativeValidation&&!l,D);if(k&&V.validatingFields&&N([d.name]),X[d.name]&&(u.valid=!1,l))break;!l&&(y(X,d.name)?D?tr(t.errors,X,d.name):E(t.errors,d.name,X[d.name]):U(t.errors,d.name))}!W(m)&&await I(m,l,u)}}return u.valid},le=()=>{for(const r of c.unMount){const l=y(i,r);l&&(l._f.refs?l._f.refs.every(u=>!Ue(u)):!Ue(l._f.ref))&&Ee(r)}c.unMount=new Set},te=(r,l)=>!s.disabled&&(r&&l&&E(a,r,l),!Q(Ae(),n)),p=(r,l,u)=>Le(r,c,{...o.mount?a:R(l)?n:J(r)?{[r]:l}:l},u,l),S=r=>Be(y(o.mount?a:n,r,s.shouldUnregister?y(n,r,[]):[])),O=(r,l,u={})=>{const h=y(i,r);let f=l;if(h){const d=h._f;d&&(!d.disabled&&E(a,r,Ft(l,d)),f=De(d.ref)&&$(l)?"":l,xt(d.ref)?[...d.ref.options].forEach(m=>m.selected=f.includes(m.value)):d.refs?Fe(d.ref)?d.refs.forEach(m=>{(!m.defaultChecked||!m.disabled)&&(Array.isArray(f)?m.checked=!!f.find(D=>D===m.value):m.checked=f===m.value||!!f)}):d.refs.forEach(m=>m.checked=m.value===f):He(d.ref)?d.ref.value="":(d.ref.value=f,d.ref.type||v.state.next({name:r,values:M(a)})))}(u.shouldDirty||u.shouldTouch)&&A(r,f,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&ye(r)},P=(r,l,u)=>{for(const h in l){if(!l.hasOwnProperty(h))return;const f=l[h],d=r+"."+h,m=y(i,d);(c.array.has(r)||L(f)||m&&!m._f)&&!fe(f)?P(d,f,u):O(d,f,u)}},q=(r,l,u={})=>{const h=y(i,r),f=c.array.has(r),d=M(l);E(a,r,d),f?(v.array.next({name:r,values:M(a)}),(V.isDirty||V.dirtyFields||x.isDirty||x.dirtyFields)&&u.shouldDirty&&v.state.next({name:r,dirtyFields:ge(n,a),isDirty:te(r,d)})):h&&!h._f&&!$(d)?P(r,d,u):O(r,d,u),ut(r,c)&&v.state.next({...t,name:r}),v.state.next({name:o.mount?r:void 0,values:M(a)})},re=async r=>{o.mount=!0;const l=r.target;let u=l.name,h=!0;const f=y(i,u),d=k=>{h=Number.isNaN(k)||fe(k)&&isNaN(k.getTime())||Q(k,y(a,u,k))},m=at(s.mode),D=at(s.reValidateMode);if(f){let k,X;const we=l.type?lt(f._f):yt(r),ie=r.type===pe.BLUR||r.type===pe.FOCUS_OUT,jt=!Xt(f._f)&&!s.resolver&&!y(t.errors,u)&&!f._f.deps||Zt(ie,y(t.touchedFields,u),t.isSubmitted,D,m),Re=ut(u,c,ie);E(a,u,we),ie?(!l||!l.readOnly)&&(f._f.onBlur&&f._f.onBlur(r),w&&w(0)):f._f.onChange&&f._f.onChange(r);const Oe=A(u,we,ie),Rt=!W(Oe)||Re;if(!ie&&v.state.next({name:u,type:r.type,values:M(a)}),jt)return(V.isValid||x.isValid)&&(s.mode==="onBlur"?ie&&j():ie||j()),Rt&&v.state.next({name:u,...Re?{}:Oe});if(!ie&&Re&&v.state.next({...t}),s.resolver){const{errors:Ze}=await G([u]);if(d(we),h){const Ot=ot(t.errors,i,u),et=ot(Ze,i,Ot.name||u);k=et.error,u=et.name,X=W(Ze)}}else N([u],!0),k=(await ct(f,c.disabled,a,T,s.shouldUseNativeValidation))[u],N([u]),d(we),h&&(k?X=!1:(V.isValid||x.isValid)&&(X=await I(i,!0)));h&&(f._f.deps&&(!Array.isArray(f._f.deps)||f._f.deps.length>0)&&ye(f._f.deps),z(u,X,k,Oe))}},ve=(r,l)=>{if(y(t.errors,l)&&r.focus)return r.focus(),1},ye=async(r,l={})=>{let u,h;const f=_e(r);if(s.resolver){const d=await me(R(r)?r:f);u=W(d),h=r?!f.some(m=>y(d,m)):u}else r?(h=(await Promise.all(f.map(async d=>{const m=y(i,d);return await I(m&&m._f?{[d]:m}:m)}))).every(Boolean),!(!h&&!t.isValid)&&j()):h=u=await I(i);return v.state.next({...!J(r)||(V.isValid||x.isValid)&&u!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:u}:{},errors:t.errors}),l.shouldFocus&&!h&&Ve(i,ve,r?f:c.mount),h},Ae=(r,l)=>{let u={...o.mount?a:n};return l&&(u=bt(l.dirtyFields?t.dirtyFields:t.touchedFields,u)),R(r)?u:J(r)?y(u,r):r.map(h=>y(u,h))},$e=(r,l)=>({invalid:!!y((l||t).errors,r),isDirty:!!y((l||t).dirtyFields,r),error:y((l||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((l||t).touchedFields,r)}),wt=r=>{r&&_e(r).forEach(l=>U(t.errors,l)),v.state.next({errors:r?t.errors:{}})},ze=(r,l,u)=>{const h=(y(i,r,{_f:{}})._f||{}).ref,f=y(t.errors,r)||{},{ref:d,message:m,type:D,...k}=f;E(t.errors,r,{...k,...l,ref:h}),v.state.next({name:r,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&h&&h.focus&&h.focus()},pt=(r,l)=>Z(r)?v.state.subscribe({next:u=>"values"in u&&r(p(void 0,l),u)}):p(r,l,!0),Ge=r=>v.state.subscribe({next:l=>{Qt(r.name,l.name,r.exact)&&Yt(l,r.formState||V,Ct,r.reRenderRoot)&&r.callback({values:{...a},...t,...l,defaultValues:n})}}).unsubscribe,Dt=r=>(o.mount=!0,x={...x,...r.formState},Ge({...r,formState:x})),Ee=(r,l={})=>{for(const u of r?_e(r):c.mount)c.mount.delete(u),c.array.delete(u),l.keepValue||(U(i,u),U(a,u)),!l.keepError&&U(t.errors,u),!l.keepDirty&&U(t.dirtyFields,u),!l.keepTouched&&U(t.touchedFields,u),!l.keepIsValidating&&U(t.validatingFields,u),!s.shouldUnregister&&!l.keepDefaultValue&&U(n,u);v.state.next({values:M(a)}),v.state.next({...t,...l.keepDirty?{isDirty:te()}:{}}),!l.keepIsValid&&j()},Ke=({disabled:r,name:l})=>{(K(r)&&o.mount||r||c.disabled.has(l))&&(r?c.disabled.add(l):c.disabled.delete(l))},Ce=(r,l={})=>{let u=y(i,r);const h=K(l.disabled)||K(s.disabled);return E(i,r,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:r}},name:r,mount:!0,...l}}),c.mount.add(r),u?Ke({disabled:K(l.disabled)?l.disabled:s.disabled,name:r}):F(r,!0,l.value),{...h?{disabled:l.disabled||s.disabled}:{},...s.progressive?{required:!!l.required,min:be(l.min),max:be(l.max),minLength:be(l.minLength),maxLength:be(l.maxLength),pattern:be(l.pattern)}:{},name:r,onChange:re,onBlur:re,ref:f=>{if(f){Ce(r,l),u=y(i,r);const d=R(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,m=qt(d),D=u._f.refs||[];if(m?D.find(k=>k===d):d===u._f.ref)return;E(i,r,{_f:{...u._f,...m?{refs:[...D.filter(Ue),d,...Array.isArray(y(n,r))?[{}]:[]],ref:{type:d.type,name:r}}:{ref:d}}}),F(r,!1,void 0,d)}else u=y(i,r,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||l.shouldUnregister)&&!(ht(c.array,r)&&o.action)&&c.unMount.add(r)}}},je=()=>s.shouldFocusError&&Ve(i,ve,c.mount),St=r=>{K(r)&&(v.state.next({disabled:r}),Ve(i,(l,u)=>{const h=y(i,u);h&&(l.disabled=h._f.disabled||r,Array.isArray(h._f.refs)&&h._f.refs.forEach(f=>{f.disabled=h._f.disabled||r}))},0,!1))},Je=(r,l)=>async u=>{let h;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let f=M(a);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:d,values:m}=await G();t.errors=d,f=M(m)}else await I(i);if(c.disabled.size)for(const d of c.disabled)U(f,d);if(U(t.errors,"root"),W(t.errors)){v.state.next({errors:{}});try{await r(f,u)}catch(d){h=d}}else l&&await l({...t.errors},u),je(),setTimeout(je);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:W(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},kt=(r,l={})=>{y(i,r)&&(R(l.defaultValue)?q(r,M(y(n,r))):(q(r,l.defaultValue),E(n,r,M(l.defaultValue))),l.keepTouched||U(t.touchedFields,r),l.keepDirty||(U(t.dirtyFields,r),t.isDirty=l.defaultValue?te(r,M(y(n,r))):te()),l.keepError||(U(t.errors,r),V.isValid&&j()),v.state.next({...t}))},Xe=(r,l={})=>{const u=r?M(r):n,h=M(u),f=W(r),d=f?n:h;if(l.keepDefaultValues||(n=u),!l.keepValues){if(l.keepDirtyValues){const m=new Set([...c.mount,...Object.keys(ge(n,a))]);for(const D of Array.from(m))y(t.dirtyFields,D)?E(d,D,y(a,D)):q(D,y(d,D))}else{if(Ne&&R(r))for(const m of c.mount){const D=y(i,m);if(D&&D._f){const k=Array.isArray(D._f.refs)?D._f.refs[0]:D._f.ref;if(De(k)){const X=k.closest("form");if(X){X.reset();break}}}}if(l.keepFieldsRef)for(const m of c.mount)q(m,y(d,m));else i={}}a=s.shouldUnregister?l.keepDefaultValues?M(n):{}:M(d),v.array.next({values:{...d}}),v.state.next({values:{...d}})}c={mount:l.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!V.isValid||!!l.keepIsValid||!!l.keepDirtyValues||!s.shouldUnregister&&!W(d),o.watch=!!s.shouldUnregister,o.action=!1,l.keepErrors||(t.errors={}),v.state.next({submitCount:l.keepSubmitCount?t.submitCount:0,isDirty:f?!1:l.keepDirty?t.isDirty:!!(l.keepDefaultValues&&!Q(r,n)),isSubmitted:l.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:l.keepDirtyValues?l.keepDefaultValues&&a?ge(n,a):t.dirtyFields:l.keepDefaultValues&&r?ge(n,r):l.keepDirty?t.dirtyFields:{},touchedFields:l.keepTouched?t.touchedFields:{},errors:l.keepErrors?t.errors:{},isSubmitSuccessful:l.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Ye=(r,l)=>Xe(Z(r)?r(a):r,l),Et=(r,l={})=>{const u=y(i,r),h=u&&u._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),l.shouldSelect&&Z(f.select)&&f.select())}},Ct=r=>{t={...t,...r}},Qe={control:{register:Ce,unregister:Ee,getFieldState:$e,handleSubmit:Je,setError:ze,_subscribe:Ge,_runSchema:G,_focusError:je,_getWatch:p,_getDirty:te,_setValid:j,_setFieldArray:ee,_setDisabledField:Ke,_setErrors:B,_getFieldArray:S,_reset:Xe,_resetDefaultValues:()=>Z(s.defaultValues)&&s.defaultValues().then(r=>{Ye(r,s.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:le,_disableForm:St,_subjects:v,_proxyFormState:V,get _fields(){return i},get _formValues(){return a},get _state(){return o},set _state(r){o=r},get _defaultValues(){return n},get _names(){return c},set _names(r){c=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:Dt,trigger:ye,register:Ce,handleSubmit:Je,watch:pt,setValue:q,getValues:Ae,reset:Ye,resetField:kt,clearErrors:wt,unregister:Ee,setError:ze,setFocus:Et,getFieldState:$e};return{...Qe,formControl:Qe}}function ir(e={}){const s=b.useRef(void 0),t=b.useRef(void 0),[i,n]=b.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:i},e.defaultValues&&!Z(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...c}=sr(e);s.current={...c,formState:i}}const a=s.current.control;return a._options=e,We(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>n({...a._formState}),reRenderRoot:!0});return n(c=>({...c,isReady:!0})),a._formState.isReady=!0,o},[a]),b.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),b.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),b.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),b.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),b.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==i.isDirty&&a._subjects.state.next({isDirty:o})}},[a,i.isDirty]),b.useEffect(()=>{var o;e.values&&!Q(e.values,t.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),!((o=a._options.resetOptions)===null||o===void 0)&&o.keepIsValid||a._setValid(),t.current=e.values,n(c=>({...c}))):a._resetDefaultValues()},[a,e.values]),b.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),s.current.formState=mt(i,a),s.current}function lr({control:e,name:s,label:t,error:i,required:n=!1,wrapperClassName:a,...o}){const c=vt({control:e,name:s}),w=i||Ut(c.errors,`${s}.message`);return g.jsxs("div",{className:Lt("w-full",a),"data-slot":"rhf-file-upload",children:[t&&g.jsxs(Mt,{htmlFor:s,className:"mb-2 block",children:[t,n&&g.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),g.jsx(Wt,{control:e,name:s,render:({field:{onChange:C,value:V,...x}})=>{const v=V?(Array.isArray(V)?V:[V]).filter(Boolean):[];return g.jsx(ce,{...o,...x,value:v,onChange:T=>{o.multiple?C(T):C(T.length>0?T[0]:void 0)},onError:T=>{console.error("File upload error:",T)},disabled:o.disabled})}}),w&&g.jsx("p",{className:"text-sm text-destructive mt-1","data-slot":"rhf-file-upload-error",children:w})]})}function fr(){const[e,s]=xe.useState([]),[t,i]=xe.useState([]),[n,a]=xe.useState([]),o=ir({defaultValues:{documents:[]}}),c=w=>{console.log("Form submitted:",w)};return g.jsxs("div",{className:"space-y-8",children:[g.jsxs(ae,{children:[g.jsxs(ne,{children:[g.jsx(ue,{children:"Basic File Upload"}),g.jsx(oe,{children:"Simple single file upload"})]}),g.jsxs(de,{children:[g.jsx(ce,{value:e,onChange:s}),e.length>0&&g.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[e.length," file(s) selected"]})]})]}),g.jsxs(ae,{children:[g.jsxs(ne,{children:[g.jsx(ue,{children:"Multiple Files"}),g.jsx(oe,{children:"Upload multiple files at once"})]}),g.jsxs(de,{children:[g.jsx(ce,{value:t,onChange:i,multiple:!0}),t.length>0&&g.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[t.length," file(s) selected"]})]})]}),g.jsxs(ae,{children:[g.jsxs(ne,{children:[g.jsx(ue,{children:"Image Only"}),g.jsx(oe,{children:"Restrict uploads to image files only"})]}),g.jsxs(de,{children:[g.jsx(ce,{value:n,onChange:a,accept:"image/*",multiple:!0,placeholder:"PNG, JPG, GIF up to 5MB"}),n.length>0&&g.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[n.length," image(s) selected"]})]})]}),g.jsxs(ae,{children:[g.jsxs(ne,{children:[g.jsx(ue,{children:"With Validation"}),g.jsx(oe,{children:"File size and count restrictions"})]}),g.jsx(de,{children:g.jsx(ce,{accept:".pdf,.doc,.docx",multiple:!0,maxSize:5*1024*1024,maxFiles:3,placeholder:"PDF, DOC, DOCX (max 5MB, max 3 files)"})})]}),g.jsxs(ae,{children:[g.jsxs(ne,{children:[g.jsx(ue,{children:"With Progress"}),g.jsx(oe,{children:"File upload with progress tracking"})]}),g.jsx(de,{children:g.jsx(ar,{})})]}),g.jsxs(ae,{children:[g.jsxs(ne,{children:[g.jsx(ue,{children:"Disabled State"}),g.jsx(oe,{children:"File upload in disabled state"})]}),g.jsx(de,{children:g.jsx(ce,{disabled:!0,placeholder:"Upload disabled"})})]}),g.jsxs(ae,{children:[g.jsxs(ne,{children:[g.jsx(ue,{children:"With React Hook Form"}),g.jsx(oe,{children:"File upload integrated with react-hook-form"})]}),g.jsx(de,{children:g.jsxs("form",{onSubmit:o.handleSubmit(c),className:"space-y-4",children:[g.jsx(lr,{control:o.control,name:"documents",label:"Upload Documents",multiple:!0,accept:".pdf,.doc,.docx",maxSize:10*1024*1024}),g.jsx(Tt,{type:"submit",children:"Submit"})]})})]})]})}function ar(){const[e,s]=xe.useState([]);xe.useEffect(()=>{if(e.length>0){const i=setInterval(()=>{s(n=>n.map(a=>{if(a.status==="uploading"&&a.progress!==void 0){const o=Math.min(a.progress+10,100);return{...a,progress:o,status:o===100?"success":"uploading"}}return a}))},500);return()=>clearInterval(i)}},[e]);const t=i=>{const n=i.map(a=>{const o=a instanceof File?a:a.file;return{file:o,preview:o.type.startsWith("image/")?URL.createObjectURL(o):void 0,progress:0,status:"uploading"}});s(n)};return g.jsx(ce,{value:e,onChange:t,showProgress:!0,multiple:!0,placeholder:"Files will show upload progress"})}export{fr as default};
